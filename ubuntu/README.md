# Building Chapel Package for Ubuntu

This directory contains the utility scripts and debian files for
building the Chapel package for Ubuntu

## Prerequisites:
The utility scripts should let you know if something isn't set, but you could
also read this and set them beforehand:

* Ideally for testing, you'll want to be running a VM with the OS and
    particular release you are building a package for.
* Set `$CHPL_RELEASE` variable to the path of a Chapel source dir.
  For example,  
  `tar -xzf chapel-1.13.0.tar.gz ; export CHPL_RELEASE=$PWD/chapel-1.13.0`
* Dependencies to install prior to package building:
  `sudo apt-get install build-essential python-setup packaging-dev libgmp-dev`
* Check `bzr whoami` : if empty, set it: `bzr whoami "Chapel Man <you@your.org>"`
* See [Ubuntu Packaging Guide](http://packaging.ubuntu.com/html/getting-set-up.html) 
  for setting up LaunchPad and Bazaar, if you plan to push the built package upstream

## Scripts

All scripts have the same usage:

Usage:

    ./<script> <release>
    # or
    export UBUNTU_RELEASE=<release>
    ./<script>
For example, use `UBUNTU_RELEASE=trusty` for Ubuntu 14.04

### build.sh

Builds a .deb and .dpkg for the provided Ubuntu release (e.g. trusty) from the
unpacked release tarball of Chapel

### test.sh

Tests the package by installing it on the current machine, uninstalling it,
and generating lintian logs

### release.sh

Prepares the package for upstream deployment and review

### clean.sh

Removes any files or directories generated by any of the other scripts

### config.sh

Not executable.

Contains all the variables necessary for other scripts
